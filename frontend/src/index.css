@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 15px;
    scrollbar-gutter: stable;
  }

  body {
    @apply bg-gray-50 text-gray-900 dark:bg-gray-950 dark:text-gray-100 transition-colors duration-200;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 15px;
    line-height: 1.55;
    scrollbar-gutter: stable;
  }

  * {
    @apply border-gray-200 dark:border-gray-800;
  }

  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgb(99 102 241 / 0.25);
    border-radius: 0.625rem;
  }
}

@layer components {
  /* ===== Buttons ===== */
  .btn-primary {
    @apply px-4 py-2 bg-primary-600 hover:bg-primary-700 active:bg-primary-800
           text-white rounded-xl font-medium text-sm transition-all duration-150
           shadow-sm hover:shadow disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply px-4 py-2 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700
           text-gray-700 dark:text-gray-300 rounded-xl font-medium text-sm
           transition-all duration-150 border border-gray-200 dark:border-gray-700 shadow-sm;
  }

  .btn-danger {
    @apply px-4 py-2 bg-red-600 hover:bg-red-700 active:bg-red-800
           text-white rounded-xl font-medium text-sm transition-all duration-150;
  }

  .btn-ghost {
    @apply px-3.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl
           text-gray-600 dark:text-gray-400 font-medium text-sm transition-all duration-150;
  }

  .btn-icon {
    @apply p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl
           text-gray-500 dark:text-gray-400 transition-all duration-150;
  }

  /* ===== Cards ===== */
  .card {
    @apply bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800;
    box-shadow: 0 1px 4px 0 rgba(0,0,0,0.05), 0 4px 12px 0 rgba(0,0,0,0.04);
  }

  .dark .card {
    box-shadow: 0 1px 4px 0 rgba(0,0,0,0.2), 0 4px 12px 0 rgba(0,0,0,0.15);
  }

  /* ===== Inputs ===== */
  .input {
    @apply w-full px-3.5 py-2.5 rounded-xl border border-gray-300 dark:border-gray-700
           bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
           focus:ring-2 focus:ring-primary-500/25 focus:border-primary-500
           outline-none transition-all duration-150 text-sm
           placeholder:text-gray-400 dark:placeholder:text-gray-500;
  }

  .label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5;
  }

  /* ===== Badges ===== */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-medium;
  }

  .badge-next {
    @apply badge bg-amber-500 text-white dark:bg-amber-600 dark:text-white font-semibold;
  }

  .badge-running {
    @apply badge bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300
           border border-blue-200 dark:border-blue-800/50;
  }

  .badge-completed {
    @apply badge bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-300
           border border-green-200 dark:border-green-800/50;
  }

  .badge-failed {
    @apply badge bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300
           border border-red-200 dark:border-red-800/50;
  }

  .badge-aborted {
    @apply badge bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300
           border border-orange-200 dark:border-orange-800/50;
  }

  .badge-idle {
    @apply badge bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400
           border border-gray-200 dark:border-gray-700;
  }

  .badge-human {
    @apply badge bg-purple-50 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300
           border border-purple-200 dark:border-purple-800/50 animate-pulse-slow;
  }

  /* ===== Sidebar ===== */
  .sidebar {
    @apply flex flex-col bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800;
  }

  /* ===== Scrollbar ===== */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.300') transparent;
  }

  .dark .scrollbar-thin {
    scrollbar-color: theme('colors.gray.700') transparent;
  }
}

/* Custom scrollbar for webkit */
.scrollbar-thin::-webkit-scrollbar {
  width: 5px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: theme('colors.gray.300');
  border-radius: 9999px;
}
.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: theme('colors.gray.700');
}

/* DnD styles */
.dragging {
  @apply opacity-50 shadow-lg ring-2 ring-primary-500;
}
.drag-over {
  @apply ring-2 ring-primary-400 ring-offset-2 dark:ring-offset-gray-900;
}

/* Sidebar transition */
.sidebar-enter {
  animation: slideInLeft 0.2s ease-out;
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); opacity: 0; }
  to   { transform: translateX(0);     opacity: 1; }
}
